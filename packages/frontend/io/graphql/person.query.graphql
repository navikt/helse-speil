fragment simulering on Simulering {
    fagsystemId
    totalbelop
    tidsstempel
    utbetalingslinjer {
        fom
        tom
        dagsats
        grad
    }
    perioder {
        fom
        tom
        utbetalinger {
            mottakerId
            mottakerNavn
            forfall
            feilkonto
            detaljer {
                fom
                tom
                utbetalingstype
                uforegrad
                typeSats
                tilbakeforing
                sats
                refunderesOrgNr
                konto
                klassekode
                antallSats
                belop
                klassekodebeskrivelse
            }
        }
    }
}

fragment vilkarsgrunnlag on Vilkarsgrunnlag {
    id
    sykepengegrunnlag
    skjaeringstidspunkt
    omregnetArsinntekt
    inntekter {
        sammenligningsgrunnlag {
            belop
            inntektFraAOrdningen {
                maned
                sum
            }
        }
        omregnetArsinntekt {
            inntektFraAOrdningen {
                maned
                sum
            }
            belop
            manedsbelop
            kilde
        }
        skjonnsmessigFastsatt {
            inntektFraAOrdningen {
                maned
                sum
            }
            belop
            manedsbelop
            kilde
        }
        arbeidsgiver
        deaktivert
    }
    arbeidsgiverrefusjoner {
        arbeidsgiver
        refusjonsopplysninger {
            fom
            tom
            belop
            meldingsreferanseId
        }
    }
    vilkarsgrunnlagtype
    ... on VilkarsgrunnlagSpleis {
        sammenligningsgrunnlag
        skjonnsmessigFastsattAarlig
        oppfyllerKravOmMinstelonn
        oppfyllerKravOmMedlemskap
        oppfyllerKravOmOpptjening
        antallOpptjeningsdagerErMinst
        grunnbelop
        avviksprosent
        opptjeningFra
        sykepengegrunnlagsgrense {
            grunnbelop
            grense
            virkningstidspunkt
        }
    }
}

fragment notat on Notat {
    id
    tekst
    opprettet
    saksbehandlerOid
    saksbehandlerNavn
    saksbehandlerEpost
    saksbehandlerIdent
    vedtaksperiodeId
    feilregistrert
    feilregistrert_tidspunkt
    type
    kommentarer {
        id
        tekst
        opprettet
        saksbehandlerident
        feilregistrert_tidspunkt
    }
}

query FetchPerson($fnr: String, $aktorId: String) {
    person(fnr: $fnr, aktorId: $aktorId) {
        fodselsnummer
        dodsdato
        enhet {
            id
            navn
        }
        infotrygdutbetalinger {
            organisasjonsnummer
            dagsats
            fom
            tom
            grad
            typetekst
        }
        personinfo {
            fornavn
            mellomnavn
            etternavn
            adressebeskyttelse
            fodselsdato
            kjonn
            reservasjon {
                kanVarsles
                reservert
            }
            unntattFraAutomatiskGodkjenning
            unntattFraAutomatisering {
                erUntatt
                arsaker
                tidspunkt
            }
        }
        tildeling {
            navn
            epost
            oid
        }
        versjon
        vilkarsgrunnlag {
            ...vilkarsgrunnlag
        }
        aktorId
        arbeidsgivere {
            bransjer
            navn
            organisasjonsnummer
            arbeidsforhold {
                sluttdato
                startdato
                stillingsprosent
                stillingstittel
            }
            ghostPerioder {
                __typename
                id
                deaktivert
                vilkarsgrunnlagId
                skjaeringstidspunkt
                fom
                tom
                organisasjonsnummer
            }
            generasjoner {
                id
                perioder {
                    __typename
                    fom
                    tom
                    erForkastet
                    inntektstype
                    opprettet
                    periodetype
                    tidslinje {
                        dato
                        grad
                        kilde {
                            id
                            type
                        }
                        sykdomsdagtype
                        utbetalingsdagtype
                        utbetalingsinfo {
                            arbeidsgiverbelop
                            inntekt
                            personbelop
                            refusjonsbelop
                            totalGrad
                            utbetaling
                        }
                        begrunnelser
                    }
                    vedtaksperiodeId
                    periodetilstand
                    skjaeringstidspunkt
                    varsler {
                        generasjonId
                        definisjonId
                        opprettet
                        kode
                        tittel
                        forklaring
                        handling
                        vurdering {
                            ident
                            status
                            tidsstempel
                        }
                    }
                    hendelser {
                        id
                        type
                        ... on Inntektsmelding {
                            beregnetInntekt
                            mottattDato
                            eksternDokumentId
                        }
                        ... on Sykmelding {
                            fom
                            tom
                            rapportertDato
                        }
                        ... on SoknadNav {
                            fom
                            tom
                            rapportertDato
                            sendtNav
                            eksternDokumentId
                        }
                        ... on SoknadArbeidsgiver {
                            fom
                            tom
                            rapportertDato
                            sendtArbeidsgiver
                            eksternDokumentId
                        }
                        ... on SoknadArbeidsledig {
                            fom
                            tom
                            rapportertDato
                            sendtNav
                            eksternDokumentId
                        }
                        ... on SoknadFrilans {
                            fom
                            tom
                            rapportertDato
                            sendtNav
                            eksternDokumentId
                        }
                    }
                    ... on UberegnetPeriode {
                        id
                        notater {
                            ...notat
                        }
                    }
                    ... on UberegnetVilkarsprovdPeriode {
                        id
                        vilkarsgrunnlagId
                        notater {
                            ...notat
                        }
                    }
                    ... on BeregnetPeriode {
                        id
                        beregningId
                        forbrukteSykedager
                        gjenstaendeSykedager
                        handlinger {
                            type
                            tillatt
                            begrunnelse
                        }
                        notater {
                            ...notat
                        }
                        periodehistorikk {
                            type
                            timestamp
                            saksbehandler_ident
                            notat_id
                        }
                        maksdato
                        periodevilkar {
                            alder {
                                alderSisteSykedag
                                oppfylt
                            }
                            sykepengedager {
                                forbrukteSykedager
                                gjenstaendeSykedager
                                maksdato
                                oppfylt
                                skjaeringstidspunkt
                            }
                        }
                        risikovurdering {
                            funn {
                                beskrivelse
                                kategori
                            }
                            kontrollertOk {
                                beskrivelse
                                kategori
                            }
                        }
                        utbetaling {
                            id
                            arbeidsgiverFagsystemId
                            arbeidsgiverNettoBelop
                            personFagsystemId
                            personNettoBelop
                            status
                            type
                            vurdering {
                                automatisk
                                godkjent
                                ident
                                tidsstempel
                            }
                            arbeidsgiversimulering {
                                ...simulering
                            }
                            personsimulering {
                                ...simulering
                            }
                        }
                        vilkarsgrunnlagId
                        oppgave {
                            id
                        }
                        paVent {
                            frist,
                            begrunnelse,
                            oid
                        }
                        totrinnsvurdering {
                            erBeslutteroppgave
                            erRetur
                            saksbehandler
                            beslutter
                        }
                        egenskaper {
                            egenskap
                            kategori
                        }
                    }
                }
            }
            overstyringer {
                hendelseId
                saksbehandler {
                    ident
                    navn
                }
                timestamp
                ferdigstilt
                __typename
                ... on Dagoverstyring {
                    begrunnelse
                    dager {
                        grad
                        fraGrad
                        dato
                        type
                        fraType
                    }
                }
                ... on Inntektoverstyring {
                    inntekt {
                        skjaeringstidspunkt
                        forklaring
                        begrunnelse
                        manedligInntekt
                        fraManedligInntekt
                        refusjonsopplysninger {
                            fom
                            tom
                            belop
                        }
                        fraRefusjonsopplysninger {
                            fom
                            tom
                            belop
                        }
                    }
                }
                ... on Arbeidsforholdoverstyring {
                    begrunnelse
                    deaktivert
                    skjaeringstidspunkt
                    forklaring
                }
                ... on Sykepengegrunnlagskjonnsfastsetting {
                    skjonnsfastsatt {
                        arsak
                        type
                        begrunnelse
                        begrunnelseMal
                        begrunnelseFritekst
                        begrunnelseKonklusjon
                        arlig
                        fraArlig
                        skjaeringstidspunkt
                    }
                }
            }
            inntekterFraAordningen {
                skjaeringstidspunkt
                inntekter {
                    maned
                    sum
                }
            }
        }
    }
}
